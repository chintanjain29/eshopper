  <button id="wishlist-{{ product.id }}" class="wishlist-button" data-product-id="{{ product.id }}">
    <svg class="wishlist-heart" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
    </svg>
</button>
  <style>
    .wishlist-button {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background-color: white;
        border: none;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: transform 0.2s ease;
        padding: 0;
        position: relative;  
        z-index: 10; 
      }
      
      .wishlist-button:hover {
        transform: scale(1.05);
      }
      
      .wishlist-heart {
        width: 20px;
        height: 20px;
      }
      
      .wishlist-heart path {
        fill: transparent;
        stroke: #333;
        stroke-width: 2;
        transition: fill 0.3s ease;
      }
      
      .wishlist-button.active .wishlist-heart path {
        fill: #D19C97;
        stroke: #D19C97;
      }
</style>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const productId = '{{ productId }}';
    const wishlistButton = document.getElementById(`wishlist-${productId}`);
    
    // Check if the product is already in the wishlist
    const wishlistId = localStorage.getItem(`wishId-${productId}`);
    if (wishlistId) {
      wishlistButton.classList.add('active');
    }
  
    // Toggle wishlist state and alert the user
    wishlistButton.addEventListener('click', () => {
      if (wishlistButton.classList.toggle('active')) {
        localStorage.setItem(`wishId-${productId}`, productId);
        alert('Product added to wishlist');
      } else {
        localStorage.removeItem(`wishId-${productId}`);
        {% comment %} alert('Product removed from wishlist'); {% endcomment %}
      }
      // Reload the page
      location.reload();
    });
  });
  </script>
  
  
  <script>
    $(document).ready(function(){
        // Function to get the current wishlist array
        function getWishlist() {
            let wishlist = localStorage.getItem('wishlist');
            return wishlist ? JSON.parse(wishlist) : [];
        }
    
        // Function to save the wishlist array
        function saveWishlist(wishlist) {
            localStorage.setItem('wishlist', JSON.stringify(wishlist));
        }
    
        // Function to toggle a product in the wishlist
        function toggleWishlistItem(productId) {
            let wishlist = getWishlist();
            let index = wishlist.indexOf(productId);
            
            if (index === -1) {
                // Product not in wishlist, add it
                wishlist.push(productId);
                alert('Product added to wishlist');
            } else {
                // Product in wishlist, remove it
                wishlist.splice(index, 1);
                alert('Product removed from wishlist');
            }
            
            saveWishlist(wishlist);
            updateButtonState(productId);
        }
    
        // Function to update button state
        function updateButtonState(productId) {
            let wishlist = getWishlist();
            let button = $('#wishlist-' + productId);
            if (wishlist.includes(productId)) {
                button.addClass('active');
            } else {
                button.removeClass('active');
            }
        }
    
        // Click event handler for wishlist buttons
        $('.wishlist-button').click(function(){
            let productId = $(this).data('product-id');
            toggleWishlistItem(productId);
        });
    
        // Initialize button states on page load
        $('.wishlist-button').each(function() {
            let productId = $(this).data('product-id');
            updateButtonState(productId);
        });
    });
    </script>